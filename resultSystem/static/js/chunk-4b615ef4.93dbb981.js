(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b615ef4"],{"0831":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("detail",{attrs:{"is-edit":!1,"is-data":!0}})],1)},s=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",[i("sticky",{attrs:{"class-name":"sub-navbar"}},[t.isEdit?t._e():i("el-button",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showGuide(e)}}},[t._v("显示帮助")]),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"submit-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v(" "+t._s(t.isEdit?"编辑成绩":"提交成绩")+" ")])],1),i("div",{staticClass:"detail-container"},[i("el-row",[i("Warning",{attrs:{"is-edit":!0,"is-data":t.isData}}),i("el-col",{attrs:{span:24}},[i("ExcelUpload",{attrs:{"file-list":t.fileList,disabled:t.isEdit},on:{onSuccess:t.onUploadSuccess,onRemove:t.onUploadRemove}})],1),i("el-col",{attrs:{span:24}})],1),i("div",{staticClass:"foresee"},[t._v("表格预览")]),i("el-table",{staticClass:"form-item",staticStyle:{width:"100%","margin-top":"0"},attrs:{data:t.tableObject,border:"","highlight-current-row":""}},t._l(t.tableHeader,(function(e){return i("el-table-column",{key:e,attrs:{prop:e,label:e,align:"center","render-header":t.labelHead}})})),1)],1)],1)],1)},o=[],r=(i("07ac"),i("b804")),l=i("1fbb"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-upload",{staticClass:"image-upload",attrs:{action:t.action,headers:t.headers,multiple:!1,limit:1,"before-upload":t.beforeUpload,"on-success":t.onSuccess,"on-remove":t.onRemove,"on-error":t.onError,"file-list":t.fileList,"on-exceed":t.onExceed,disabled:t.disabled,drag:"","show-file-list":"",accept:".xlsx,.xls"}},[i("i",{staticClass:"el-icon-upload"}),0===t.fileList.length?i("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),i("em",[t._v("点击上传")])]):i("div",{staticClass:"el-upload__text"},[t._v("图书已上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传xlsx文件")])])],1)},d=[],u=i("5f87"),h={props:{fileList:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{action:"".concat("http://101.200.211.153:5000","/student/upload")}},computed:{headers:function(){return{Authorization:"Bearer ".concat(Object(u["a"])())}}},methods:{beforeUpload:function(t){this.$emit("beforeUpload",t)},onSuccess:function(t,e){var i=t.code,n=t.msg,s=t.data;0===i?(this.$message({message:n,type:"success"}),this.$emit("onSuccess",s)):(this.$message({message:n&&"上传失败，失败原因：".concat(n)||"上传失败",type:"error"}),this.$emit("onError",e))},onError:function(t){var e=t.message&&JSON.parse(t.message);this.$message({message:e&&e.msg&&"上传失败，失败原因：".concat(e.msg)||"上传失败",type:"error"}),this.$emit("onError",t)},onRemove:function(){this.$message({message:"删除成功",type:"success"}),this.$emit("onRemove")},onExceed:function(){this.$message({message:"每次只能上传一个成绩表格",type:"warning"})}}},p=h,f=i("2877"),m=Object(f["a"])(p,c,d,!1,null,"32e812b8",null),v=m.exports,b=i("49e5"),g=i("c24c"),x=i.n(g),w=(i("01d7"),[{element:".el-upload-dragger",popover:{title:"上传成绩",description:"点击上传成绩excel文件",position:"bottom"}},{element:".form-item",popover:{title:"excel文件内容",description:"在此处检查您上传的excel文件是否正确及正确显示，若不符合要求请修改excel文件后上传",position:"top"}},{element:".submit-btn",popover:{title:"提交信息",description:"将成绩保存到后台",position:"left"}}]),y=w,_={components:{Warning:l["a"],Sticky:r["a"],ExcelUpload:v},props:{isEdit:Boolean,isData:Boolean},data:function(){return{driver:null,disabled:"",loading:!1,tableObject:[],tableHeader:[],fileList:[]}},created:function(){console.log(this.$route.params)},mounted:function(){this.driver=new x.a({nextBtnText:"下一个",prevBtnText:"上一个",closeBtnText:"关闭",doneBtnText:"完成"})},methods:{labelHead:function(t,e){var i=e.column,n=i.label.length,s=16;return i.minWidth=s*n,t("div",{class:"table-head",style:{width:"100%"}},[i.label])},onUploadSuccess:function(t){this.tableObject!==Array&&(this.tableObject=[]),this.tableHeader=t.header,this.tableObject=Object.values(t.tableData)},setDefault:function(){this.tableObject=[],this.tableHeader=[]},onUploadRemove:function(){this.setDefault()},showGuide:function(){this.driver.defineSteps(y),this.driver.start()},submitForm:function(){var t=this;this.loading=!0;var e=this.tableObject;this.isEdit?Object(b["i"])(e).then((function(t){console.log(t)})).catch((function(e){t.loading=!1,console.log(t.isEdit)})):Object(b["c"])(e).then((function(e){var i=e.msg;t.$notify({title:"操作成功",message:i,type:"success",duration:2e3}),t.loading=!1})).catch((function(e){t.loading=!1}))}}},S=_,O=(i("f403"),Object(f["a"])(S,a,o,!1,null,"1f633252",null)),j=O.exports,E={components:{Detail:j}},k=E,$=Object(f["a"])(k,n,s,!1,null,"25dc7773",null);e["default"]=$.exports},"1fbb":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{directives:[{name:"show",rawName:"v-show",value:t.isData,expression:"isData"}],staticStyle:{"margin-bottom":"10px"}},[n("aside",[n("b",[t._v("请按照下面的样例在excel中输入好表头后填入对应信息，格式正确才能够正确上传")]),n("br"),t._v(" 当表格列数过多时，将鼠标置于表格内，按住shift滑动鼠标滚轮即可查看超出页面的内容 "),n("br"),n("div",{staticStyle:{float:"left","margin-top":"15px","margin-right":"10px"}},[t._v(" 点击查看样例excel文件→ ")]),n("el-image",{staticStyle:{height:"50px",width:"50px"},attrs:{src:i("f82f"),"preview-src-list":[i("f82f")]}})],1)]),n("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.isData,expression:"!isData"}]},[n("div",[t._v(" 请去个人成绩选择要修改的学生 ")])])],1)},s=[],a={props:{isEdit:Boolean,isData:Boolean}},o=a,r=i("2877"),l=Object(r["a"])(o,n,s,!1,null,null,null);e["a"]=l.exports},"49e5":function(t,e,i){"use strict";i.d(e,"d",(function(){return s})),i.d(e,"g",(function(){return a})),i.d(e,"f",(function(){return o})),i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return l})),i.d(e,"i",(function(){return c})),i.d(e,"h",(function(){return d})),i.d(e,"a",(function(){return u})),i.d(e,"e",(function(){return h}));var n=i("b775");function s(t){return Object(n["a"])({url:"/student/category",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/student/list",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/student/listRank",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/student/chartList",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/student/create",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/student/update",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/student/pass",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/student/advantage",method:"post",data:t})}function h(){return Object(n["a"])({url:"/student/getSum",method:"get"})}},b804:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{height:t.height+"px",zIndex:t.zIndex}},[i("div",{class:t.className,style:{top:t.isSticky?t.stickyTop+"px":"",zIndex:t.zIndex,position:t.position,width:t.width,height:t.height+"px"}},[t._t("default",[i("div",[t._v("sticky")])])],2)])},s=[],a=(i("a9e3"),{name:"Sticky",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String,default:""}},data:function(){return{active:!1,position:"",width:void 0,height:void 0,isSticky:!1}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize)},methods:{sticky:function(){this.active||(this.position="fixed",this.active=!0,this.width=this.width+"px",this.isSticky=!0)},handleReset:function(){this.active&&this.reset()},reset:function(){this.position="",this.width="auto",this.active=!1,this.isSticky=!1},handleScroll:function(){var t=this.$el.getBoundingClientRect().width;this.width=t||"auto";var e=this.$el.getBoundingClientRect().top;e<this.stickyTop?this.sticky():this.handleReset()},handleResize:function(){this.isSticky&&(this.width=this.$el.getBoundingClientRect().width+"px")}}}),o=a,r=i("2877"),l=Object(r["a"])(o,n,s,!1,null,null,null);e["a"]=l.exports},e7c3:function(t,e,i){},f403:function(t,e,i){"use strict";i("e7c3")},f82f:function(t,e,i){t.exports=i.p+"static/img/dataSample.0071700e.png"}}]);
//# sourceMappingURL=chunk-4b615ef4.93dbb981.js.map